<!doctype html>

<html>

<head>
 <title>arnoudbuzing</title>

<style>

* {
  margin: 0;
  padding: 0;
}

input[type=text] {
  font-size: 24px;
  padding: 12px;
  margin: 8px;
  border: none;
  outline: none;
  width: 100%;
  box-sizing : border-box;
  color: white;
  background-color: #CCCCCC;
}

input[type=text]:focus {
  background-color: #CCCCCC;
}

.in {
  padding: 12px;
  margin: 8px;
  background-color: #CCCCCC;
}
.out {
  font-size: 18px;
  padding: 12px;
  margin: 8px;
  color: white;
  background-color: #AAAAAA;
}

</style>

<script>
var count = 1;
var t0,t1;
var inputs = [];

var ws = new WebSocket('wss://18.217.160.48:443', 'echo-protocol');

ws.addEventListener("message", function(e) {
 var msg = e.data;
 inputs.push(msg);
 t1 = performance.now();
 var old = document.getElementById('aws').innerHTML;
 document.getElementById('aws').innerHTML = "<div class='out'>" + msg + "</div>" + old;
 count+=1;
});

function sendMessage() {
  var message = document.getElementById('message').value;
  ws.send(message);
  document.getElementById('form').reset();
}

function keyHandler(e) {
  if(e.keyCode==13) {
    t0 = performance.now();
    sendMessage();
    return false;
  } else {
    return true;
  }
}
</script>

</head>

<body>
 <div class='in'>
 <form id='form'>
  <input type='text' id='message' onkeypress='return keyHandler(event)'></input>
 </form>
</div>
 <div id='aws'></div>
</body>
</html>

<!doctype html>

<html>

<head>
 <title>arnoudbuzing</title>

<style>
input[type=text] {
  padding: 12px 20px;
  margin: 8px 0;
  border: none;
  outline: none;
  background-color: #DDDDDD;
  color: white;
}

input[type=text]:focus {
    background-color: #AAAAAA;
}

.out { background-color: #FFAAAA; }

</style>

<script>
var count = 1;
var t0,t1;

var ws = new WebSocket('wss://18.217.160.48:443', 'echo-protocol');

ws.addEventListener("message", function(e) {
 var msg = e.data;
 t1 = performance.now();
 var old = document.getElementById('aws').innerHTML;
 document.getElementById('aws').innerHTML = "<div class='out'>(" + Math.round(t1-t0) + "' ms) Out["+count+"'] = " + msg + "</div>" + old;
 count+=1;
});

function sendMessage() {
  var message = document.getElementById('message').value;
  ws.send(message);
  document.getElementById('form').reset();
}

function keyHandler(e) {
  if(e.keyCode==13) {
    t0 = performance.now();
    sendMessage();
    return false;
  } else {
    return true;
  }
}
</script>

</head>

<body>
 <form id='form'>
  <input type='text' id='message' size='80' onkeypress='return keyHandler(event)'></input>
 </form>
 <br><br>
 <div id='aws'></div>
</body>
</html>

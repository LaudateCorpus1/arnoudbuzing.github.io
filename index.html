<!doctype html>

<html>

<head>
 <title>arnoudbuzing</title>

<style>
input[type=text] {
  border: none;
  outline: none;
  background-color: #3CBC8D;
  color: white;
}

input[type=text]:focus {
    background-color: lightblue;
}

</style>

<script>
var count = 1;
var t0,t1;

var ws = new WebSocket('wss://18.217.160.48:443', 'echo-protocol');

ws.addEventListener("message", function(e) {
 var msg = e.data;
 t1 = performance.now();
 var old = document.getElementById('aws').innerHTML;
 document.getElementById('aws').innerHTML = '(' + Math.round(t1-t0) + ' ms) Out['+(count++)+'] = ' + msg + '<br><br>' + old;
 document.getElementById('prompt').innerHTML = 'In['+count+'] := ';
});

function sendMessage() {
  var message = document.getElementById('message').value;
  ws.send(message);
  document.getElementById('form').reset();
}

function keyHandler(e) {
  if(e.keyCode==13) {
    t0 = performance.now();
    sendMessage();
    return false;
  } else {
    return true;
  }
}
</script>

</head>

<body>
<h1>wolfram language</h1>
<h2>web socket demo (text-only)</h2>

<form id='form'>
<span id='prompt'></span> <input type='text' id='message' size='80' onkeypress='return keyHandler(event)'></input>
</form>

<br><br>

<div id='aws'></div>


</body>

<script>
document.getElementById('prompt').innerHTML = 'In['+count+'] := ';
</script>

</html>
